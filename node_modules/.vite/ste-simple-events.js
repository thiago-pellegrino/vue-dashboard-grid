import {
  __commonJS
} from "./chunk-Z47AEMLX.js";

// node_modules/ste-core/dist/dispatching/DispatcherBase.js
var require_DispatcherBase = __commonJS({
  "node_modules/ste-core/dist/dispatching/DispatcherBase.js"(exports) {
    "use strict";
    Object.defineProperty(exports, "__esModule", { value: true });
    exports.DispatcherBase = void 0;
    var __1 = require_dist();
    var DispatcherBase = class {
      constructor() {
        this._subscriptions = new Array();
      }
      get count() {
        return this._subscriptions.length;
      }
      get onSubscriptionChange() {
        if (this._onSubscriptionChange == null) {
          this._onSubscriptionChange = new __1.SubscriptionChangeEventDispatcher();
        }
        return this._onSubscriptionChange.asEvent();
      }
      subscribe(fn) {
        if (fn) {
          this._subscriptions.push(this.createSubscription(fn, false));
          this.triggerSubscriptionChange();
        }
        return () => {
          this.unsubscribe(fn);
        };
      }
      sub(fn) {
        return this.subscribe(fn);
      }
      one(fn) {
        if (fn) {
          this._subscriptions.push(this.createSubscription(fn, true));
          this.triggerSubscriptionChange();
        }
        return () => {
          this.unsubscribe(fn);
        };
      }
      has(fn) {
        if (!fn)
          return false;
        return this._subscriptions.some((sub) => sub.handler == fn);
      }
      unsubscribe(fn) {
        if (!fn)
          return;
        let changes = false;
        for (let i = 0; i < this._subscriptions.length; i++) {
          if (this._subscriptions[i].handler == fn) {
            this._subscriptions.splice(i, 1);
            changes = true;
            break;
          }
        }
        if (changes) {
          this.triggerSubscriptionChange();
        }
      }
      unsub(fn) {
        this.unsubscribe(fn);
      }
      _dispatch(executeAsync, scope, args) {
        for (let sub of [...this._subscriptions]) {
          let ev = new __1.EventManagement(() => this.unsub(sub.handler));
          let nargs = Array.prototype.slice.call(args);
          nargs.push(ev);
          let s = sub;
          s.execute(executeAsync, scope, nargs);
          this.cleanup(sub);
          if (!executeAsync && ev.propagationStopped) {
            return { propagationStopped: true };
          }
        }
        if (executeAsync) {
          return null;
        }
        return { propagationStopped: false };
      }
      createSubscription(handler, isOnce) {
        return new __1.Subscription(handler, isOnce);
      }
      cleanup(sub) {
        let changes = false;
        if (sub.isOnce && sub.isExecuted) {
          let i = this._subscriptions.indexOf(sub);
          if (i > -1) {
            this._subscriptions.splice(i, 1);
            changes = true;
          }
        }
        if (changes) {
          this.triggerSubscriptionChange();
        }
      }
      asEvent() {
        if (this._wrap == null) {
          this._wrap = new __1.DispatcherWrapper(this);
        }
        return this._wrap;
      }
      clear() {
        if (this._subscriptions.length != 0) {
          this._subscriptions.splice(0, this._subscriptions.length);
          this.triggerSubscriptionChange();
        }
      }
      triggerSubscriptionChange() {
        if (this._onSubscriptionChange != null) {
          this._onSubscriptionChange.dispatch(this.count);
        }
      }
    };
    exports.DispatcherBase = DispatcherBase;
  }
});

// node_modules/ste-core/dist/dispatching/DispatchError.js
var require_DispatchError = __commonJS({
  "node_modules/ste-core/dist/dispatching/DispatchError.js"(exports) {
    "use strict";
    Object.defineProperty(exports, "__esModule", { value: true });
    exports.DispatchError = void 0;
    var DispatchError = class extends Error {
      constructor(message) {
        super(message);
      }
    };
    exports.DispatchError = DispatchError;
  }
});

// node_modules/ste-core/dist/dispatching/DispatcherWrapper.js
var require_DispatcherWrapper = __commonJS({
  "node_modules/ste-core/dist/dispatching/DispatcherWrapper.js"(exports) {
    "use strict";
    Object.defineProperty(exports, "__esModule", { value: true });
    exports.DispatcherWrapper = void 0;
    var DispatcherWrapper = class {
      constructor(dispatcher) {
        this._subscribe = (fn) => dispatcher.subscribe(fn);
        this._unsubscribe = (fn) => dispatcher.unsubscribe(fn);
        this._one = (fn) => dispatcher.one(fn);
        this._has = (fn) => dispatcher.has(fn);
        this._clear = () => dispatcher.clear();
        this._count = () => dispatcher.count;
        this._onSubscriptionChange = () => dispatcher.onSubscriptionChange;
      }
      get onSubscriptionChange() {
        return this._onSubscriptionChange();
      }
      get count() {
        return this._count();
      }
      subscribe(fn) {
        return this._subscribe(fn);
      }
      sub(fn) {
        return this.subscribe(fn);
      }
      unsubscribe(fn) {
        this._unsubscribe(fn);
      }
      unsub(fn) {
        this.unsubscribe(fn);
      }
      one(fn) {
        return this._one(fn);
      }
      has(fn) {
        return this._has(fn);
      }
      clear() {
        this._clear();
      }
    };
    exports.DispatcherWrapper = DispatcherWrapper;
  }
});

// node_modules/ste-core/dist/dispatching/EventListBase.js
var require_EventListBase = __commonJS({
  "node_modules/ste-core/dist/dispatching/EventListBase.js"(exports) {
    "use strict";
    Object.defineProperty(exports, "__esModule", { value: true });
    exports.EventListBase = void 0;
    var EventListBase = class {
      constructor() {
        this._events = {};
      }
      get(name) {
        let event = this._events[name];
        if (event) {
          return event;
        }
        event = this.createDispatcher();
        this._events[name] = event;
        return event;
      }
      remove(name) {
        delete this._events[name];
      }
    };
    exports.EventListBase = EventListBase;
  }
});

// node_modules/ste-core/dist/management/EventManagement.js
var require_EventManagement = __commonJS({
  "node_modules/ste-core/dist/management/EventManagement.js"(exports) {
    "use strict";
    Object.defineProperty(exports, "__esModule", { value: true });
    exports.EventManagement = void 0;
    var EventManagement = class {
      constructor(unsub) {
        this.unsub = unsub;
        this.propagationStopped = false;
      }
      stopPropagation() {
        this.propagationStopped = true;
      }
    };
    exports.EventManagement = EventManagement;
  }
});

// node_modules/ste-core/dist/handling/HandlingBase.js
var require_HandlingBase = __commonJS({
  "node_modules/ste-core/dist/handling/HandlingBase.js"(exports) {
    "use strict";
    Object.defineProperty(exports, "__esModule", { value: true });
    exports.HandlingBase = void 0;
    var HandlingBase = class {
      constructor(events) {
        this.events = events;
      }
      one(name, fn) {
        this.events.get(name).one(fn);
      }
      has(name, fn) {
        return this.events.get(name).has(fn);
      }
      subscribe(name, fn) {
        this.events.get(name).subscribe(fn);
      }
      sub(name, fn) {
        this.subscribe(name, fn);
      }
      unsubscribe(name, fn) {
        this.events.get(name).unsubscribe(fn);
      }
      unsub(name, fn) {
        this.unsubscribe(name, fn);
      }
    };
    exports.HandlingBase = HandlingBase;
  }
});

// node_modules/ste-core/dist/dispatching/PromiseDispatcherBase.js
var require_PromiseDispatcherBase = __commonJS({
  "node_modules/ste-core/dist/dispatching/PromiseDispatcherBase.js"(exports) {
    "use strict";
    Object.defineProperty(exports, "__esModule", { value: true });
    exports.PromiseDispatcherBase = void 0;
    var __1 = require_dist();
    var PromiseDispatcherBase = class extends __1.DispatcherBase {
      _dispatch(executeAsync, scope, args) {
        throw new __1.DispatchError("_dispatch not supported. Use _dispatchAsPromise.");
      }
      createSubscription(handler, isOnce) {
        return new __1.PromiseSubscription(handler, isOnce);
      }
      async _dispatchAsPromise(executeAsync, scope, args) {
        for (let sub of [...this._subscriptions]) {
          let ev = new __1.EventManagement(() => this.unsub(sub.handler));
          let nargs = Array.prototype.slice.call(args);
          nargs.push(ev);
          let ps = sub;
          await ps.execute(executeAsync, scope, nargs);
          this.cleanup(sub);
          if (!executeAsync && ev.propagationStopped) {
            return { propagationStopped: true };
          }
        }
        if (executeAsync) {
          return null;
        }
        return { propagationStopped: false };
      }
    };
    exports.PromiseDispatcherBase = PromiseDispatcherBase;
  }
});

// node_modules/ste-core/dist/events/PromiseSubscription.js
var require_PromiseSubscription = __commonJS({
  "node_modules/ste-core/dist/events/PromiseSubscription.js"(exports) {
    "use strict";
    Object.defineProperty(exports, "__esModule", { value: true });
    exports.PromiseSubscription = void 0;
    var PromiseSubscription = class {
      constructor(handler, isOnce) {
        this.handler = handler;
        this.isOnce = isOnce;
        this.isExecuted = false;
      }
      async execute(executeAsync, scope, args) {
        if (!this.isOnce || !this.isExecuted) {
          this.isExecuted = true;
          var fn = this.handler;
          if (executeAsync) {
            setTimeout(() => {
              fn.apply(scope, args);
            }, 1);
            return;
          }
          let result = fn.apply(scope, args);
          await result;
        }
      }
    };
    exports.PromiseSubscription = PromiseSubscription;
  }
});

// node_modules/ste-core/dist/events/Subscription.js
var require_Subscription = __commonJS({
  "node_modules/ste-core/dist/events/Subscription.js"(exports) {
    "use strict";
    Object.defineProperty(exports, "__esModule", { value: true });
    exports.Subscription = void 0;
    var Subscription = class {
      constructor(handler, isOnce) {
        this.handler = handler;
        this.isOnce = isOnce;
        this.isExecuted = false;
      }
      execute(executeAsync, scope, args) {
        if (!this.isOnce || !this.isExecuted) {
          this.isExecuted = true;
          var fn = this.handler;
          if (executeAsync) {
            setTimeout(() => {
              fn.apply(scope, args);
            }, 1);
          } else {
            fn.apply(scope, args);
          }
        }
      }
    };
    exports.Subscription = Subscription;
  }
});

// node_modules/ste-core/dist/dispatching/SubscriptionChangeEventHandler.js
var require_SubscriptionChangeEventHandler = __commonJS({
  "node_modules/ste-core/dist/dispatching/SubscriptionChangeEventHandler.js"(exports) {
    "use strict";
    Object.defineProperty(exports, "__esModule", { value: true });
    exports.SubscriptionChangeEventDispatcher = void 0;
    var __1 = require_dist();
    var SubscriptionChangeEventDispatcher = class extends __1.DispatcherBase {
      dispatch(count) {
        this._dispatch(false, this, arguments);
      }
    };
    exports.SubscriptionChangeEventDispatcher = SubscriptionChangeEventDispatcher;
  }
});

// node_modules/ste-core/dist/index.js
var require_dist = __commonJS({
  "node_modules/ste-core/dist/index.js"(exports) {
    "use strict";
    Object.defineProperty(exports, "__esModule", { value: true });
    exports.SubscriptionChangeEventDispatcher = exports.HandlingBase = exports.PromiseDispatcherBase = exports.PromiseSubscription = exports.DispatchError = exports.EventManagement = exports.EventListBase = exports.DispatcherWrapper = exports.DispatcherBase = exports.Subscription = void 0;
    var DispatcherBase_1 = require_DispatcherBase();
    Object.defineProperty(exports, "DispatcherBase", { enumerable: true, get: function() {
      return DispatcherBase_1.DispatcherBase;
    } });
    var DispatchError_1 = require_DispatchError();
    Object.defineProperty(exports, "DispatchError", { enumerable: true, get: function() {
      return DispatchError_1.DispatchError;
    } });
    var DispatcherWrapper_1 = require_DispatcherWrapper();
    Object.defineProperty(exports, "DispatcherWrapper", { enumerable: true, get: function() {
      return DispatcherWrapper_1.DispatcherWrapper;
    } });
    var EventListBase_1 = require_EventListBase();
    Object.defineProperty(exports, "EventListBase", { enumerable: true, get: function() {
      return EventListBase_1.EventListBase;
    } });
    var EventManagement_1 = require_EventManagement();
    Object.defineProperty(exports, "EventManagement", { enumerable: true, get: function() {
      return EventManagement_1.EventManagement;
    } });
    var HandlingBase_1 = require_HandlingBase();
    Object.defineProperty(exports, "HandlingBase", { enumerable: true, get: function() {
      return HandlingBase_1.HandlingBase;
    } });
    var PromiseDispatcherBase_1 = require_PromiseDispatcherBase();
    Object.defineProperty(exports, "PromiseDispatcherBase", { enumerable: true, get: function() {
      return PromiseDispatcherBase_1.PromiseDispatcherBase;
    } });
    var PromiseSubscription_1 = require_PromiseSubscription();
    Object.defineProperty(exports, "PromiseSubscription", { enumerable: true, get: function() {
      return PromiseSubscription_1.PromiseSubscription;
    } });
    var Subscription_1 = require_Subscription();
    Object.defineProperty(exports, "Subscription", { enumerable: true, get: function() {
      return Subscription_1.Subscription;
    } });
    var SubscriptionChangeEventHandler_1 = require_SubscriptionChangeEventHandler();
    Object.defineProperty(exports, "SubscriptionChangeEventDispatcher", { enumerable: true, get: function() {
      return SubscriptionChangeEventHandler_1.SubscriptionChangeEventDispatcher;
    } });
  }
});

// node_modules/ste-simple-events/dist/SimpleEventDispatcher.js
var require_SimpleEventDispatcher = __commonJS({
  "node_modules/ste-simple-events/dist/SimpleEventDispatcher.js"(exports) {
    "use strict";
    Object.defineProperty(exports, "__esModule", { value: true });
    exports.SimpleEventDispatcher = void 0;
    var ste_core_1 = require_dist();
    var SimpleEventDispatcher = class extends ste_core_1.DispatcherBase {
      constructor() {
        super();
      }
      dispatch(args) {
        const result = this._dispatch(false, this, arguments);
        if (result == null) {
          throw new ste_core_1.DispatchError("Got `null` back from dispatch.");
        }
        return result;
      }
      dispatchAsync(args) {
        this._dispatch(true, this, arguments);
      }
      asEvent() {
        return super.asEvent();
      }
    };
    exports.SimpleEventDispatcher = SimpleEventDispatcher;
  }
});

// node_modules/ste-simple-events/dist/SimpleEventList.js
var require_SimpleEventList = __commonJS({
  "node_modules/ste-simple-events/dist/SimpleEventList.js"(exports) {
    "use strict";
    Object.defineProperty(exports, "__esModule", { value: true });
    exports.SimpleEventList = void 0;
    var ste_core_1 = require_dist();
    var SimpleEventDispatcher_1 = require_SimpleEventDispatcher();
    var SimpleEventList = class extends ste_core_1.EventListBase {
      constructor() {
        super();
      }
      createDispatcher() {
        return new SimpleEventDispatcher_1.SimpleEventDispatcher();
      }
    };
    exports.SimpleEventList = SimpleEventList;
  }
});

// node_modules/ste-simple-events/dist/SimpleEventHandlingBase.js
var require_SimpleEventHandlingBase = __commonJS({
  "node_modules/ste-simple-events/dist/SimpleEventHandlingBase.js"(exports) {
    "use strict";
    Object.defineProperty(exports, "__esModule", { value: true });
    exports.SimpleEventHandlingBase = void 0;
    var ste_core_1 = require_dist();
    var SimpleEventList_1 = require_SimpleEventList();
    var SimpleEventHandlingBase = class extends ste_core_1.HandlingBase {
      constructor() {
        super(new SimpleEventList_1.SimpleEventList());
      }
    };
    exports.SimpleEventHandlingBase = SimpleEventHandlingBase;
  }
});

// node_modules/ste-simple-events/dist/NonUniformSimpleEventList.js
var require_NonUniformSimpleEventList = __commonJS({
  "node_modules/ste-simple-events/dist/NonUniformSimpleEventList.js"(exports) {
    "use strict";
    Object.defineProperty(exports, "__esModule", { value: true });
    exports.NonUniformSimpleEventList = void 0;
    var SimpleEventDispatcher_1 = require_SimpleEventDispatcher();
    var NonUniformSimpleEventList = class {
      constructor() {
        this._events = {};
      }
      get(name) {
        if (this._events[name]) {
          return this._events[name];
        }
        const event = this.createDispatcher();
        this._events[name] = event;
        return event;
      }
      remove(name) {
        delete this._events[name];
      }
      createDispatcher() {
        return new SimpleEventDispatcher_1.SimpleEventDispatcher();
      }
    };
    exports.NonUniformSimpleEventList = NonUniformSimpleEventList;
  }
});

// node_modules/ste-simple-events/dist/index.js
var require_dist2 = __commonJS({
  "node_modules/ste-simple-events/dist/index.js"(exports) {
    "use strict";
    Object.defineProperty(exports, "__esModule", { value: true });
    exports.NonUniformSimpleEventList = exports.SimpleEventList = exports.SimpleEventHandlingBase = exports.SimpleEventDispatcher = void 0;
    var SimpleEventDispatcher_1 = require_SimpleEventDispatcher();
    Object.defineProperty(exports, "SimpleEventDispatcher", { enumerable: true, get: function() {
      return SimpleEventDispatcher_1.SimpleEventDispatcher;
    } });
    var SimpleEventHandlingBase_1 = require_SimpleEventHandlingBase();
    Object.defineProperty(exports, "SimpleEventHandlingBase", { enumerable: true, get: function() {
      return SimpleEventHandlingBase_1.SimpleEventHandlingBase;
    } });
    var NonUniformSimpleEventList_1 = require_NonUniformSimpleEventList();
    Object.defineProperty(exports, "NonUniformSimpleEventList", { enumerable: true, get: function() {
      return NonUniformSimpleEventList_1.NonUniformSimpleEventList;
    } });
    var SimpleEventList_1 = require_SimpleEventList();
    Object.defineProperty(exports, "SimpleEventList", { enumerable: true, get: function() {
      return SimpleEventList_1.SimpleEventList;
    } });
  }
});

// dep:ste-simple-events
var ste_simple_events_default = require_dist2();
export {
  ste_simple_events_default as default
};
/*!
 * Strongly Typed Events for TypeScript - Core
 * https://github.com/KeesCBakker/StronlyTypedEvents/
 * http://keestalkstech.com
 *
 * Copyright Kees C. Bakker / KeesTalksTech
 * Released under the MIT license
 */
//# sourceMappingURL=ste-simple-events.js.map
